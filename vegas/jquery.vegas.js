(function(a){function n(d,b){var c={align:"center",valign:"center"};a.extend(c,b);if(0==d.height())d.load(function(){n(a(this),b)});else{var g=a(window).width(),e=a(window).height(),f=d.width(),j=d.height()/f,h;e/g>j?(f=e/j,j=e):(f=g,j*=g);h={width:f+"px",height:j+"px",top:"auto",bottom:"auto",left:"auto",right:"auto"};isNaN(parseInt(c.valign))?"top"==c.valign?h.top=0:"bottom"==c.valign?h.bottom=0:h.top=(e-j)/2:h.top=0-(j-e)/100*parseInt(c.valign)+"px";isNaN(parseInt(c.align))?"left"==c.align?h.left=
0:"right"==c.align?h.right=0:h.left=(g-f)/2:h.left=0-(f-g)/100*parseInt(c.align)+"px";d.css(h)}}var t=a("<img />").addClass("vegas-background"),k=a("<div />").addClass("vegas-overlay"),q=a("<div />").addClass("vegas-loading"),e=a(),l=null,f=[],b=0,r=5E3,s=function(){},m,p={init:function(d){var f;f=a("body").css("backgroundImage")?a("body").css("backgroundImage").replace(/url\("?(.*?)"?\)/i,"$1"):void 0;var c={src:f,align:"center",valign:"center",fade:0,loading:!0,load:function(){},complete:function(){}};
a.extend(c,a.vegas.defaults.background,d);c.loading&&q.prependTo("body").fadeIn();var g=t.clone();g.css({position:"fixed",left:"0px",top:"0px"}).bind("load",function(){g!=e&&(a(window).bind("load resize.vegas",function(){n(g,c)}),e.is("img")?(e.stop(),g.hide().insertAfter(e).fadeIn(c.fade,function(){a(".vegas-background").not(this).remove();a("body").trigger("vegascomplete",[this,b-1]);c.complete.apply(g,[b-1])})):g.hide().prependTo("body").fadeIn(c.fade,function(){a("body").trigger("vegascomplete",
[this,b-1]);c.complete.apply(this,[b-1])}),e=g,n(e,c),c.loading&&q.fadeOut("fast",function(){a(this).remove()}),a("body").trigger("vegasload",[e.get(0),b-1]),c.load.apply(e.get(0),[b-1]),b&&(a("body").trigger("vegaswalk",[e.get(0),b-1]),c.walk.apply(e.get(0),[b-1])))}).attr("src",c.src);return a.vegas},destroy:function(d){if(!d||"background"==d)a(".vegas-background, .vegas-loading").remove(),a(window).unbind("resize.vegas"),e=a();"overlay"==d&&a(".vegas-overlay").remove();return a.vegas},overlay:function(d){var b=
{src:null,opacity:null};a.extend(b,a.vegas.defaults.overlay,d);k.remove();k.css({margin:"0",padding:"0",position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"});b.src&&k.css("backgroundImage","url("+b.src+")");b.opacity&&k.css("opacity",b.opacity);k.prependTo("body");return a.vegas},slideshow:function(d,k){var c={step:b,delay:r,preload:true,backgrounds:f,walk:s};a.extend(c,a.vegas.defaults.slideshow,d);c.backgrounds!=f&&(d.step||(c.step=0),d.walk||(c.walk=function(){}),c.preload&&a.vegas("preload",
c.backgrounds));f=c.backgrounds;r=c.delay;b=c.step;s=c.walk;clearInterval(m);if(!f.length)return a.vegas;var g=function(){0>b&&(b=f.length-1);if(b>=f.length||!f[b-1])b=0;var d=f[b++];d.walk=c.walk;"undefined"==typeof d.fade&&(d.fade=c.fade);d.fade>c.delay&&(d.fade=c.delay);a.vegas(d)};g();k||(l=!1,a("body").trigger("vegasstart",[e.get(0),b-1]));l||(m=setInterval(g,c.delay));return a.vegas},next:function(){var d=b;b&&(a.vegas("slideshow",{step:b},!0),a("body").trigger("vegasnext",[e.get(0),b-1,d-1]));
return a.vegas},previous:function(){var d=b;b&&(a.vegas("slideshow",{step:b-2},!0),a("body").trigger("vegasprevious",[e.get(0),b-1,d-1]));return a.vegas},jump:function(d){var f=b;b&&(a.vegas("slideshow",{step:d},!0),a("body").trigger("vegasjump",[e.get(0),b-1,f-1]));return a.vegas},stop:function(){var d=b;b=0;l=null;clearInterval(m);a("body").trigger("vegasstop",[e.get(0),d-1]);return a.vegas},pause:function(){l=!0;clearInterval(m);a("body").trigger("vegaspause",[e.get(0),b-1]);return a.vegas},get:function(a){if(null==
a||"background"==a)return e.get(0);if("overlay"==a)return k.get(0);if("step"==a)return b-1;if("paused"==a)return l},preload:function(b){var e=[],c;for(c in b)if(b[c].src){var f=document.createElement("img");f.src=b[c].src;e.push(f)}return a.vegas}};a.vegas=function(b){if(p[b])return p[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof b||!b)return p.init.apply(this,arguments);a.error("Method "+b+" does not exist")};a.vegas.defaults={background:{},slideshow:{},overlay:{}}})(jQuery);